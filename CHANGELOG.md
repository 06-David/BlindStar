# BlindStar 更新日志

所有重要的项目变更都会记录在这个文件中。

## [Beta 1.3] - 2025-08-13

### 🚀 BlindStar Beta 1.3 发布

本次版本聚焦于统一启动体验、导航上下文框架、语音稳定性与深度估计的离线鲁棒性。

### 🧭 启动与导航
- 统一启动器 `realtime_launcher.py`：合并原 `realtime_analysis.py` 与 `start_realtime_analysis.py` 的功能，支持 `auto/direct/test` 三种模式
- 导航上下文框架 `core/navigation_context.py`：提供 assist/guide/full 三种导航模式，支持路径跟踪与状态管理
- 启动示例：
  - `python realtime_launcher.py --source 0`
  - `python realtime_launcher.py --source 0 --no-depth --fps 30`
  - `python realtime_launcher.py --source 0 --enable-navigation --nav-mode guide`
### 🔬 深度估计技术升级
- **ZoeDepth集成**: 从MiDaS升级到ZoeDepth，提供更精确的深度估计
- **室内场景优化**: 特别针对室内环境的深度测量精度提升
- **GPU内存优化**: 更高效的GPU内存使用和资源管理
- **实时深度可视化**: 改进的深度图生成和叠加显示

### 🗺️ 语音导航系统
- **高德地图导航**: 完整的语音导航功能，支持路径规划和实时指引
- **智能语音命令**: 支持"导航到天安门"、"结束导航"等自然语言命令
- **实时路径播报**: 转向提示、距离播报和路况信息
- **导航状态管理**: 开始、暂停、继续、重新规划等完整控制

### 🎤 语音系统优化
- **双引擎TTS**: pyttsx3 + SAPI双引擎语音合成，提高稳定性
- **音频设备互斥**: TTS和STT智能互斥，避免音频冲突
- **语音识别增强**: 优化Vosk引擎配置，提高中文识别准确率
- **冷却机制**: 智能语音播报冷却，避免信息过载

### 🔧 架构优化
- **帧分析器合并**: 将 `advanced_frame_analyzer.py` 和 `frame_analyzer.py` 合并为统一模块
- **向后兼容**: 保留 `AdvancedFrameAnalyzer` 和 `RobustVideoAnalyzer` 类别名
- **功能增强**: 统一的帧分析器支持基础和高级分析模式
- **代码简化**: 减少重复代码，提高维护性

---

## [Beta 1.1] - 2025-08-03

### 🎤 语音交互系统
- **语音识别 (STT)**: 集成Vosk离线语音识别引擎，支持中文语音命令
- **语音合成 (TTS)**: 支持Windows和Linux/macOS的文本转语音功能
- **语音命令系统**: 支持多种语音命令，如"检测物体"、"查询附近餐厅"等
- **离线语音处理**: 无需网络连接，保护用户隐私
- **实时语音反馈**: 检测结果和系统状态实时语音播报

### 🗺️ POI查询功能
- **高德地图API集成**: 基于高德地图API的POI查询服务
- **智能位置识别**: 自动获取用户当前位置或支持手动设置
- **多类别POI支持**: 餐饮、购物、交通、医疗、娱乐等20+类别
- **距离计算**: 精确计算POI与用户的距离
- **语音播报结果**: POI查询结果通过语音播报给用户

### 🎯 模块化架构升级
- **新增核心模块**: 
  - `stt_engine.py` - 语音识别引擎
  - `tts_engine.py` - 语音合成引擎
  - `poi_query.py` - POI查询服务
  - `advanced_frame_analyzer.py` - 高级帧分析器
  - `object_tracker.py` - 物体跟踪器
  - `batch_processor.py` - 批量处理器
- **模块化设计**: 支持按需启用不同功能模块
- **配置系统**: 灵活的模块配置和参数管理

### 🔧 系统优化
- **命令行参数增强**: 新增`--modules`参数支持选择性启用功能
- **错误处理改进**: 更robust的错误处理和恢复机制
- **性能监控**: 实时显示系统性能和资源使用情况
- **日志系统**: 完善的日志记录和调试信息

### 🎬 视频处理增强
- **高级帧分析**: 更精确的物体检测和跟踪
- **批量处理优化**: 支持大规模视频和图像批量分析
- **深度可视化**: 改进的深度图生成和可视化
- **多格式支持**: 支持更多视频和图像格式

### 🏗️ 开发工具
- **测试脚本完善**: 新增多个测试和验证脚本
- **代码质量**: 改进的代码结构和注释
- **文档更新**: 完善的使用说明和API文档

---

## [Beta 1.0] - 2025-07-22

### 🎉 BlindStar Beta 1.0 发布

这是BlindStar的第一个Beta版本，集成了完整的视觉分析和视频处理功能。

### 🎬 视频输出功能
- **完整视频标注**: 生成带有完整标注信息的输出视频
- **物体跟踪可视化**: 彩色边界框，每个物体ID使用不同颜色
- **运动方向箭头**: 形象显示物体运动方向和角度
- **多行信息标签**: 显示物体类别、置信度、距离、速度等信息
- **CSV详细数据**: 生成包含28个字段的完整帧级检测数据

### 📊 数据记录增强
- **物体跟踪ID**: 持续跟踪物体，分配唯一ID
- **速度计算**: 实时计算像素速度和实际速度（米/秒、公里/小时）
- **运动状态识别**: 自动识别静止、匀速、加速、减速状态
- **运动方向**: 精确计算运动方向角度
- **中文表头**: CSV文件使用中文字段名，便于理解

### 🔧 系统优化
- **标注显示优化**: 使用英文标注避免字符编码问题
- **视频时长修复**: 支持处理完整视频，不再限制帧数
- **字体渲染改进**: 使用更robust的字体设置和背景
- **运动状态控制**: 可选择是否显示运动状态信息

### 🎯 用户体验
- **命令行参数**: 新增`--no-video-output`选项控制视频输出
- **进度显示**: 实时显示处理进度和预计完成时间
- **错误恢复**: 单文件错误不影响整体批量处理
- **性能监控**: 显示FPS、检测数量等实时统计

### 🏗️ 核心架构
- **模块化设计**: 完整的核心模块体系
- **BlindStar主引擎**: 集成YOLO + MiDaS的视觉分析引擎
- **批量处理器**: 支持大规模视频和图像批量分析
- **高级帧分析器**: 详细的帧级分析和物体跟踪
- **物体跟踪器**: 实时物体跟踪和运动分析
- **距离测量**: MiDaS深度估计集成
- **配置系统**: 灵活的配置管理

### 📦 功能模块
- **视频分析**: 完整的视频帧分析和标注
- **图像分析**: 单张图像的深度分析
- **批量处理**: 大规模数据处理能力
- **数据导出**: JSON、CSV、视频多格式输出
- **实时监控**: 进度跟踪和性能监控

### 🚀 技术特性
- **高性能**: GPU加速，支持大规模数据处理
- **准确性**: YOLO + MiDaS双模型融合，提供精确的检测和距离测量
- **实时性**: 45+ FPS的处理速度，支持实时分析
- **完整性**: 从检测到跟踪到输出的完整工作流
- **易用性**: 简单的命令行接口和丰富的配置选项

---

## 版本统计

| 版本 | 发布日期 | 主要功能 | 文件数量 | 代码行数 |
|------|----------|----------|----------|----------|
| Beta 1.3 | 2025-08-13 | 统一启动器 + 导航上下文 + TTS稳定性 | — | — |
| Beta 1.2 | 2025-08-05 | ZoeDepth + 语音导航 | 65+ | 14000+ |
| Beta 1.1 | 2025-08-03 | 语音交互 + POI查询 | 60+ | 12000+ |
| Beta 1.0 | 2025-07-22 | 完整视觉分析系统 | 50+ | 9000+ |

## 开发里程碑

- **🗺️ 2025-08-05**: BlindStar Beta 1.2 发布，升级深度估计技术，新增语音导航系统
- **🎤 2025-08-03**: BlindStar Beta 1.1 发布，新增语音交互和POI查询功能
- **🚀 2025-07-22**: BlindStar Beta 1.0 发布，完整的视觉分析和视频处理系统

---

## 🔮 未来计划


---

**BlindStar** - 让视觉无障碍，让世界更清晰 🌟